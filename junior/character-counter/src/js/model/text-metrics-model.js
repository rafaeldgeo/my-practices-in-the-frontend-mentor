const PATTERN_EXCLUDE_SPACES = /[\s]/g; // generated by IA
const PATTERN_WORDS = /\p{L}+/gu; // generated by IA
const PATTERN_SENTENCE = /[^.]+\./g; // generated by IA

// count the all types of characters 
function countAllCharacters(text) {
    const totalCharac = text.length;
    return totalCharac;
}

// count the characters excluding the spaces
function countNoSpacesCharacters(text) {
    const totalNoSpaceCharac = excludeSpaces(text).length;
    return totalNoSpaceCharac;
}

// exclude the spaces
function excludeSpaces(text) {
    return text.replace(PATTERN_EXCLUDE_SPACES, "");
}

// count the words and senteces 
function countWordsSenteces(text) {
    const wordsMatch = text.match(PATTERN_WORDS);
    const totalWords = wordsMatch ? wordsMatch.length : 0;
    const totalSentences = totalWords > 0 && text.match(PATTERN_SENTENCE) ? text.match(PATTERN_SENTENCE).length : 0;
    return { totalWords, totalSentences }
}

// calculate the time to reading
export function calcReadingTime(text) {
    const words = countWordsSenteces(text).totalWords;
    const WORD_PER_MINUTE = 200;
    return words / WORD_PER_MINUTE;
}

// calcule the metrics
export function calculateMetrics(textInputed) {
    return {
        totalCharacters: countAllCharacters(textInputed),
        totalNoSpaceCharacters: countNoSpacesCharacters(textInputed),
        totalWords: countWordsSenteces(textInputed).totalWords,
        totalSenteces: countWordsSenteces(textInputed).totalSentences,
        readingTime: calcReadingTime(textInputed)
    }
}