const PATTERN_ONLY_LETTERS = /[a-z]/g; // generated by IA

export function handleDensity(text) {
    const textLowerCase = text.toLowerCase(text);
    const letters = textLowerCase.match(PATTERN_ONLY_LETTERS);
    if (letters) {
        const totalLettersInText = letters.length;
        const resultCountLetters = countLetters(letters);
        const resultStatus = calculeDensity(resultCountLetters, totalLettersInText);
        return resultStatus;
    };

    return [];
}

// counter the letters and return a map with letter and number
function countLetters(letters) {

    const numberOfLetters = letters.reduce((acc, letter) => {
        if (!acc[letter]) {
            acc[letter] = 1;
        } else {
            acc[letter]++;
        }
        return acc;
    }, {});

    return numberOfLetters;
}

// calculate the density
function calculeDensity(resultCountLetters, totalLettersInText) {
    const ResultComposition = [];
    for (const key in resultCountLetters) {
        const count = resultCountLetters[key];
        const percentage = (count / totalLettersInText) * 100;
        ResultComposition.push({ letter: key, count: count, percentage: percentage.toFixed(2) });
    }
    return ResultComposition;
}



