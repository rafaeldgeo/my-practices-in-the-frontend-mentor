const PATTERN_LIMIT_INPUT = /[^0-9]/g; // generated by IA
const inputLimitCharacters = document.querySelector(".form__input");
const textArea = document.querySelector(".form__text");
const diVWarningLimit = document.querySelector(".form__warning-limit-characters");
const spanWarningLimitValue = diVWarningLimit.querySelector(".form__warning-limit-value");

// show the input to define limit of characters
export function showInputLimitCharacters(isChecked) {
    if (isChecked) {
        inputLimitCharacters.classList.add("form__input--active");
        inputLimitCharacters.setAttribute("aria-hidden", "false");
    } else {
        inputLimitCharacters.setAttribute("aria-hidden", "true");
        inputLimitCharacters.classList.remove("form__input--active");
        inputLimitCharacters.value = "";
    }
}

// capture the value from input limit characters
export function captureValueLimitCharacters() {
    const value = inputLimitCharacters.value.trim();
    return value;
}

// Sanitize input when the user types letter and symbols
function sanitizeLimitInput(value) {
    return value.replace(PATTERN_LIMIT_INPUT, "");
}

// Sanitize input when the user types letter and symbols
export function handleLimitInput() {
    const value = captureValueLimitCharacters();
    const sanitizeValue = sanitizeLimitInput(value);
    inputLimitCharacters.value = sanitizeValue;
}

// update warming messages
export function updateExceedLimit(isExceed, limitDefined) {
    
    if (isExceed) {
        spanWarningLimitValue.textContent = limitDefined;
        diVWarningLimit.setAttribute("aria-hidden", "false");
    } else {
        diVWarningLimit.setAttribute("aria-hidden", "true");
    }
    textArea.classList.toggle("form__text--error", isExceed);
    diVWarningLimit.classList.toggle("form__warning-limit-characters--active", isExceed);
}



